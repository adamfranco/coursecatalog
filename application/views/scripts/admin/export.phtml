<?php
	$this->headLink(array('rel' => 'stylesheet', 'href' => $this->baseUrl('/StyleSheets/midd/Export.css'), 'media' => 'all'));
	$this->headScript()->appendFile($this->baseUrl('javascript/export.js'));
	$this->headScript()->appendFile($this->baseUrl('javascript/jquery-ui-1.12.1/jquery-ui.min.js'));
?>

<h1>Manage Catalog Export Configurations</h1>
<div class='admin-menu'><a href="<?php print $this->url(array('action' => 'index')); ?>">&laquo; Back to Administration</a></div>

<div class='config-menu'>
	<form class='config-select-form' action="<?php print $this->url(); ?>" method="get">
		<select name='config' onchange="this.form.submit();">
			<option value="select">Select a configuration</option>
			<?php
			foreach ($this->configs as $config) {
				print "<option value='".$config['label']."'".(($config == $this->config)?' selected="selected"':'').">".$config['label']."</option>";
			}
			?>
		</select>
	</form>
	<p class='inline-p'> - or - <a href="<?php print $this->url(array('controller' => 'export', 'action' => 'insertconfig')); ?>">Create a new configuration</a></p>
</div>

<?php
	print "<div id='config-body'>";

	if($this->catalogId) {
		print "<input id='catalogId' type='hidden' value='" . $this->catalogId . "'></input>";
		print "<input id='configId' type='hidden' value='" . $this->config['id'] . "'></input>";
		print "<button value='save' onclick='saveJSON()'>Save</button>";
		print "<button value='reset' onclick='reset()'>Reset to last save</button>";
		print "<button onclick='newSection(null)'>Add section to end of list</button>";
		print "<ul id='sections-list' class='sections-list'>";
		print "</ul>";
		print "<button value='save' onclick='saveJSON()'>Save</button>";
		print "<button value='reset' onclick='reset()'>Reset to last save</button>";
		print "<button onclick='newSection(null)'>Add section to end of list</button>";
	}

	print "</div>";
?>
